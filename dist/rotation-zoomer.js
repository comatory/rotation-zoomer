// Generated by CoffeeScript 1.11.0
(function() {
  var Zoomer, rotationZoomer,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  (function($) {
    return $.fn.rotationZoomer = function(opts) {
      if (opts == null) {
        opts = {};
      }
      return this.each(function(index, el) {
        return new rotationZoomer(el, opts);
      });
    };
  })($);

  rotationZoomer = (function() {
    function rotationZoomer(el, opts) {
      this.zoom = bind(this.zoom, this);
      this.handleClick = bind(this.handleClick, this);
      this.$el = $(el);
      this.el = el;
      this.opts = opts;
      this.parseOptions();
      this.initialize();
    }

    rotationZoomer.prototype.initialize = function() {
      this.width = this.$el.width();
      this.height = this.$el.height();
      this.dimensions = {
        vert: {
          w: this.width,
          h: this.height
        },
        hor: {
          w: this.height,
          h: this.width
        }
      };
      this.zoomers = [];
      return this.initializeCanvas();
    };

    rotationZoomer.prototype.initializeCanvas = function() {
      this.$canvas = $('<canvas>');
      this.$canvas.css({
        position: this.$el.css('position'),
        display: this.$el.css('display')
      });
      this.$el.parents().first().append(this.$canvas);
      this.$el.css('display', 'none');
      this.context = this.$canvas.get(0).getContext('2d');
      this.bindControls();
      return this.transform();
    };

    rotationZoomer.prototype.parseOptions = function() {
      var err;
      this.options = {
        rotation: this.opts.rotation || 0,
        rotateButton: this.opts.rotateButton,
        antiRotateButton: this.opts.antiRotateButton,
        zoomerWidth: this.opts.ZoomerWidth || 150,
        zoomerHeight: this.opts.ZoomerHeight || 100,
        scale: this.opts.scale || 2.5,
        closeOnClick: this.opts.closeOnClick || true,
        closeOnClickOutside: this.opts.closeOnClickOutside || true,
        multiZoom: this.opts.multiZoom || false,
        showZoomerAfterRotation: this.opts.showZoomerAfterRotation || true
      };
      if (this.options.closeOnClick && this.options.multiZoom) {
        this.options.multiZoom = false;
        err = 'You set options "closeOnClick" and "multiZoom" to true. \n';
        err += ' This is invalid combination of arguments. Setting "multiZoom" to false.';
        console.warn(err);
      }
      this.deg = this.options.rotation;
      return this.options;
    };

    rotationZoomer.prototype.bindControls = function() {
      if (this.options.rotateButton) {
        this.$rotateButton = $(this.options.rotateButton);
      }
      if (this.options.antiRotateButton) {
        this.$antiRotateButton = $(this.options.antiRotateButton);
      }
      if (this.$rotateButton) {
        this.$rotateButton.on('click', (function(_this) {
          return function() {
            return _this.rotateCW();
          };
        })(this));
      }
      if (this.$antiRotateButton) {
        this.$antiRotateButton.on('click', (function(_this) {
          return function() {
            return _this.rotateACW();
          };
        })(this));
      }
      return this.$canvas.on('click', this.handleClick);
    };

    rotationZoomer.prototype.setWidthAndHeight = function() {
      if (this.hasHorizontalRotation()) {
        this.width = this.dimensions.hor.w;
        return this.height = this.dimensions.hor.h;
      } else {
        this.width = this.dimensions.vert.w;
        return this.height = this.dimensions.vert.h;
      }
    };

    rotationZoomer.prototype.transform = function() {
      this.setWidthAndHeight();
      this.context.canvas.width = this.width;
      this.context.canvas.height = this.height;
      return this.rotate();
    };

    rotationZoomer.prototype.rotate = function() {
      this.context.save();
      switch (this.deg) {
        case 90:
          this.context.translate(this.width, 0);
          break;
        case 270:
          this.context.translate(0, this.height);
          break;
        case 180:
          this.context.translate(this.width, this.height);
          break;
      }
      this.context.rotate((Math.PI / 180) * this.deg);
      return this.redraw();
    };

    rotationZoomer.prototype.rotateCW = function() {
      this.deg = this.deg + 90 >= 360 ? 0 : this.deg + 90;
      this.transform();
      return this.deg;
    };

    rotationZoomer.prototype.rotateACW = function() {
      this.deg = this.deg - 90 < 0 ? 270 : this.deg - 90;
      this.transform();
      return this.deg;
    };

    rotationZoomer.prototype.hasHorizontalRotation = function() {
      return this.deg === 90 || this.deg === 270;
    };

    rotationZoomer.prototype.clear = function() {
      return this.context.clearRect(0, 0, this.context.canvas.width, this.context.canvas.height);
    };

    rotationZoomer.prototype.redraw = function() {
      this.clear();
      this.draw();
      if (!this.options.showZoomerAfterRotation) {
        return this.initializeZoomers();
      }
    };

    rotationZoomer.prototype.draw = function() {
      if (this.hasHorizontalRotation()) {
        return this.context.drawImage(this.el, 0, 0, this.height, this.width);
      } else {
        return this.context.drawImage(this.el, 0, 0, this.width, this.height);
      }
    };

    rotationZoomer.prototype.handleClick = function(e) {
      return this.zoom(e);
    };

    rotationZoomer.prototype.zoom = function(e) {
      this.coords = {
        x: e.clientX - this.context.canvas.getBoundingClientRect().left,
        y: e.clientY - this.context.canvas.getBoundingClientRect().top
      };
      this.sourceCoords = {
        x: -this.coords.x + ((this.options.zoomerWidth / 2) / this.options.scale),
        y: -this.coords.y + ((this.options.zoomerHeight / 2) / this.options.scale)
      };
      return this.addNewZoomer();
    };

    rotationZoomer.prototype.addNewZoomer = function() {
      var zoomerContext;
      zoomerContext = $('<canvas>').get(0).getContext('2d');
      zoomerContext.canvas.width = this.options.zoomerWidth;
      zoomerContext.canvas.height = this.options.zoomerHeight;
      zoomerContext.scale(this.options.scale, this.options.scale);
      zoomerContext.translate(this.sourceCoords.x, this.sourceCoords.y);
      zoomerContext.drawImage(this.context.canvas, 0, 0);
      this.zoomers.push(new Zoomer(zoomerContext, this.options, this.coords.x, this.coords.y, true));
      return this.initializeZoomers();
    };

    rotationZoomer.prototype.initializeZoomers = function() {
      var i, len, ref, results, zoomer;
      this.context.restore();
      ref = this.zoomers;
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        zoomer = ref[i];
        this.context.drawImage(zoomer.context.canvas, zoomer.originX(), zoomer.originY(), zoomer.context.canvas.width, zoomer.context.canvas.height);
        results.push(this.context.strokeRect(zoomer.originX(), zoomer.originY(), zoomer.context.canvas.width, zoomer.context.canvas.height));
      }
      return results;
    };

    return rotationZoomer;

  })();

  Zoomer = (function() {
    function Zoomer(context, instanceOptions, x, y, active) {
      this.context = $.extend(true, {}, context);
      this.instanceOptions = instanceOptions;
      this.x = x;
      this.y = y;
      this.active = active;
    }

    Zoomer.prototype.originX = function() {
      return this.x - this.instanceOptions.zoomerWidth / 2;
    };

    Zoomer.prototype.originY = function() {
      return this.y - this.instanceOptions.zoomerHeight / 2;
    };

    return Zoomer;

  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm90YXRpb24tem9vbWVyLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJzb3VyY2Uvcm90YXRpb24tem9vbWVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7QUFBQSxNQUFBLHNCQUFBO0lBQUE7O0VBQUcsQ0FBQSxTQUFDLENBQUQ7V0FDRCxDQUFDLENBQUMsRUFBRSxDQUFDLGNBQUwsR0FBc0IsU0FBQyxJQUFEOztRQUFDLE9BQU87O2FBRTFCLElBQUksQ0FBQyxJQUFMLENBQVUsU0FBQyxLQUFELEVBQVEsRUFBUjtlQUNKLElBQUEsY0FBQSxDQUFlLEVBQWYsRUFBbUIsSUFBbkI7TUFESSxDQUFWO0lBRmtCO0VBRHJCLENBQUEsQ0FBSCxDQUFJLENBQUo7O0VBT007SUFHUyx3QkFBQyxFQUFELEVBQUssSUFBTDs7O01BQ1gsSUFBQyxDQUFBLEdBQUQsR0FBTyxDQUFBLENBQUUsRUFBRjtNQUNQLElBQUMsQ0FBQSxFQUFELEdBQU07TUFDTixJQUFDLENBQUEsSUFBRCxHQUFRO01BQ1IsSUFBQyxDQUFBLFlBQUQsQ0FBQTtNQUNBLElBQUMsQ0FBQSxVQUFELENBQUE7SUFMVzs7NkJBT2IsVUFBQSxHQUFZLFNBQUE7TUFDVixJQUFDLENBQUEsS0FBRCxHQUFTLElBQUMsQ0FBQSxHQUFHLENBQUMsS0FBTCxDQUFBO01BQ1QsSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUFDLENBQUEsR0FBRyxDQUFDLE1BQUwsQ0FBQTtNQUdWLElBQUMsQ0FBQSxVQUFELEdBQ0U7UUFBQSxJQUFBLEVBQ0U7VUFBQSxDQUFBLEVBQUcsSUFBQyxDQUFBLEtBQUo7VUFDQSxDQUFBLEVBQUcsSUFBQyxDQUFBLE1BREo7U0FERjtRQUdBLEdBQUEsRUFDRTtVQUFBLENBQUEsRUFBRyxJQUFDLENBQUEsTUFBSjtVQUNBLENBQUEsRUFBRyxJQUFDLENBQUEsS0FESjtTQUpGOztNQU9GLElBQUMsQ0FBQSxPQUFELEdBQVc7YUFFWCxJQUFDLENBQUEsZ0JBQUQsQ0FBQTtJQWZVOzs2QkFpQlosZ0JBQUEsR0FBa0IsU0FBQTtNQUVoQixJQUFDLENBQUEsT0FBRCxHQUFXLENBQUEsQ0FBRSxVQUFGO01BRVgsSUFBQyxDQUFBLE9BQU8sQ0FBQyxHQUFULENBQWE7UUFDWCxRQUFBLEVBQVUsSUFBQyxDQUFBLEdBQUcsQ0FBQyxHQUFMLENBQVMsVUFBVCxDQURDO1FBRVgsT0FBQSxFQUFTLElBQUMsQ0FBQSxHQUFHLENBQUMsR0FBTCxDQUFTLFNBQVQsQ0FGRTtPQUFiO01BS0EsSUFBQyxDQUFBLEdBQUcsQ0FBQyxPQUFMLENBQUEsQ0FBYyxDQUFDLEtBQWYsQ0FBQSxDQUFzQixDQUFDLE1BQXZCLENBQThCLElBQUMsQ0FBQSxPQUEvQjtNQUNBLElBQUMsQ0FBQSxHQUFHLENBQUMsR0FBTCxDQUFTLFNBQVQsRUFBb0IsTUFBcEI7TUFFQSxJQUFDLENBQUEsT0FBRCxHQUFXLElBQUMsQ0FBQSxPQUFPLENBQUMsR0FBVCxDQUFhLENBQWIsQ0FBZSxDQUFDLFVBQWhCLENBQTJCLElBQTNCO01BQ1gsSUFBQyxDQUFBLFlBQUQsQ0FBQTthQUNBLElBQUMsQ0FBQSxTQUFELENBQUE7SUFkZ0I7OzZCQWdCbEIsWUFBQSxHQUFjLFNBQUE7QUFDWixVQUFBO01BQUEsSUFBQyxDQUFBLE9BQUQsR0FDRTtRQUFBLFFBQUEsRUFBVSxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQU4sSUFBa0IsQ0FBNUI7UUFDQSxZQUFBLEVBQWMsSUFBQyxDQUFBLElBQUksQ0FBQyxZQURwQjtRQUVBLGdCQUFBLEVBQWtCLElBQUMsQ0FBQSxJQUFJLENBQUMsZ0JBRnhCO1FBR0EsV0FBQSxFQUFhLElBQUMsQ0FBQSxJQUFJLENBQUMsV0FBTixJQUFxQixHQUhsQztRQUlBLFlBQUEsRUFBYyxJQUFDLENBQUEsSUFBSSxDQUFDLFlBQU4sSUFBc0IsR0FKcEM7UUFLQSxLQUFBLEVBQU8sSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFOLElBQWUsR0FMdEI7UUFNQSxZQUFBLEVBQWMsSUFBQyxDQUFBLElBQUksQ0FBQyxZQUFOLElBQXNCLElBTnBDO1FBT0EsbUJBQUEsRUFBcUIsSUFBQyxDQUFBLElBQUksQ0FBQyxtQkFBTixJQUE2QixJQVBsRDtRQVFBLFNBQUEsRUFBVyxJQUFDLENBQUEsSUFBSSxDQUFDLFNBQU4sSUFBbUIsS0FSOUI7UUFTQSx1QkFBQSxFQUF5QixJQUFDLENBQUEsSUFBSSxDQUFDLHVCQUFOLElBQWlDLElBVDFEOztNQVlGLElBQUcsSUFBQyxDQUFBLE9BQU8sQ0FBQyxZQUFULElBQXlCLElBQUMsQ0FBQSxPQUFPLENBQUMsU0FBckM7UUFDRSxJQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsR0FBcUI7UUFDckIsR0FBQSxHQUFNO1FBQ04sR0FBQSxJQUFPO1FBQ1AsT0FBTyxDQUFDLElBQVIsQ0FBYSxHQUFiLEVBSkY7O01BT0EsSUFBQyxDQUFBLEdBQUQsR0FBTyxJQUFDLENBQUEsT0FBTyxDQUFDO2FBRWhCLElBQUMsQ0FBQTtJQXZCVzs7NkJBMEJkLFlBQUEsR0FBYyxTQUFBO01BQ1osSUFBRyxJQUFDLENBQUEsT0FBTyxDQUFDLFlBQVo7UUFDRSxJQUFDLENBQUEsYUFBRCxHQUFpQixDQUFBLENBQUUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxZQUFYLEVBRG5COztNQUdBLElBQUcsSUFBQyxDQUFBLE9BQU8sQ0FBQyxnQkFBWjtRQUNFLElBQUMsQ0FBQSxpQkFBRCxHQUFxQixDQUFBLENBQUUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxnQkFBWCxFQUR2Qjs7TUFHQSxJQUFHLElBQUMsQ0FBQSxhQUFKO1FBQ0UsSUFBQyxDQUFBLGFBQWEsQ0FBQyxFQUFmLENBQWtCLE9BQWxCLEVBQTJCLENBQUEsU0FBQSxLQUFBO2lCQUFBLFNBQUE7bUJBQ3pCLEtBQUMsQ0FBQSxRQUFELENBQUE7VUFEeUI7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQTNCLEVBREY7O01BSUEsSUFBRyxJQUFDLENBQUEsaUJBQUo7UUFDRSxJQUFDLENBQUEsaUJBQWlCLENBQUMsRUFBbkIsQ0FBc0IsT0FBdEIsRUFBK0IsQ0FBQSxTQUFBLEtBQUE7aUJBQUEsU0FBQTttQkFDN0IsS0FBQyxDQUFBLFNBQUQsQ0FBQTtVQUQ2QjtRQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBL0IsRUFERjs7YUFJQSxJQUFDLENBQUEsT0FBTyxDQUFDLEVBQVQsQ0FBWSxPQUFaLEVBQXFCLElBQUMsQ0FBQSxXQUF0QjtJQWZZOzs2QkFrQmQsaUJBQUEsR0FBbUIsU0FBQTtNQUNqQixJQUFHLElBQUMsQ0FBQSxxQkFBRCxDQUFBLENBQUg7UUFDRSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUMsQ0FBQSxVQUFVLENBQUMsR0FBRyxDQUFDO2VBQ3pCLElBQUMsQ0FBQSxNQUFELEdBQVUsSUFBQyxDQUFBLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFGNUI7T0FBQSxNQUFBO1FBSUUsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFDLENBQUEsVUFBVSxDQUFDLElBQUksQ0FBQztlQUMxQixJQUFDLENBQUEsTUFBRCxHQUFVLElBQUMsQ0FBQSxVQUFVLENBQUMsSUFBSSxDQUFDLEVBTDdCOztJQURpQjs7NkJBU25CLFNBQUEsR0FBVyxTQUFBO01BQ1QsSUFBQyxDQUFBLGlCQUFELENBQUE7TUFDQSxJQUFDLENBQUEsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFoQixHQUF3QixJQUFDLENBQUE7TUFDekIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBaEIsR0FBeUIsSUFBQyxDQUFBO2FBQzFCLElBQUMsQ0FBQSxNQUFELENBQUE7SUFKUzs7NkJBTVgsTUFBQSxHQUFRLFNBQUE7TUFFTixJQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsQ0FBQTtBQUNBLGNBQU8sSUFBQyxDQUFBLEdBQVI7QUFBQSxhQUNPLEVBRFA7VUFFSSxJQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsQ0FBbUIsSUFBQyxDQUFBLEtBQXBCLEVBQTJCLENBQTNCO0FBQ0E7QUFISixhQUlPLEdBSlA7VUFLSSxJQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsQ0FBbUIsQ0FBbkIsRUFBc0IsSUFBQyxDQUFBLE1BQXZCO0FBQ0E7QUFOSixhQU9PLEdBUFA7VUFRSSxJQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsQ0FBbUIsSUFBQyxDQUFBLEtBQXBCLEVBQTJCLElBQUMsQ0FBQSxNQUE1QjtBQUNBO0FBVEo7TUFXQSxJQUFDLENBQUEsT0FBTyxDQUFDLE1BQVQsQ0FBZ0IsQ0FBQyxJQUFJLENBQUMsRUFBTCxHQUFVLEdBQVgsQ0FBQSxHQUFrQixJQUFDLENBQUEsR0FBbkM7YUFDQSxJQUFDLENBQUEsTUFBRCxDQUFBO0lBZk07OzZCQWtCUixRQUFBLEdBQVUsU0FBQTtNQUNSLElBQUMsQ0FBQSxHQUFELEdBQVUsSUFBQyxDQUFBLEdBQUQsR0FBTyxFQUFQLElBQWEsR0FBaEIsR0FDQyxDQURELEdBR0MsSUFBQyxDQUFBLEdBQUQsR0FBTztNQUNmLElBQUMsQ0FBQSxTQUFELENBQUE7YUFDQSxJQUFDLENBQUE7SUFOTzs7NkJBU1YsU0FBQSxHQUFXLFNBQUE7TUFDVCxJQUFDLENBQUEsR0FBRCxHQUFVLElBQUMsQ0FBQSxHQUFELEdBQU8sRUFBUCxHQUFZLENBQWYsR0FDQyxHQURELEdBR0MsSUFBQyxDQUFBLEdBQUQsR0FBTztNQUNmLElBQUMsQ0FBQSxTQUFELENBQUE7YUFDQSxJQUFDLENBQUE7SUFOUTs7NkJBU1gscUJBQUEsR0FBdUIsU0FBQTthQUNyQixJQUFDLENBQUEsR0FBRCxLQUFRLEVBQVIsSUFBYyxJQUFDLENBQUEsR0FBRCxLQUFRO0lBREQ7OzZCQUl2QixLQUFBLEdBQU8sU0FBQTthQUNMLElBQUMsQ0FBQSxPQUFPLENBQUMsU0FBVCxDQUFtQixDQUFuQixFQUFzQixDQUF0QixFQUF5QixJQUFDLENBQUEsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUF6QyxFQUFnRCxJQUFDLENBQUEsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFoRTtJQURLOzs2QkFJUCxNQUFBLEdBQVEsU0FBQTtNQUNOLElBQUMsQ0FBQSxLQUFELENBQUE7TUFDQSxJQUFDLENBQUEsSUFBRCxDQUFBO01BQ0EsSUFBQSxDQUE0QixJQUFDLENBQUEsT0FBTyxDQUFDLHVCQUFyQztlQUFBLElBQUMsQ0FBQSxpQkFBRCxDQUFBLEVBQUE7O0lBSE07OzZCQUtSLElBQUEsR0FBTSxTQUFBO01BQ0osSUFBRyxJQUFDLENBQUEscUJBQUQsQ0FBQSxDQUFIO2VBQ0UsSUFBQyxDQUFBLE9BQU8sQ0FBQyxTQUFULENBQW1CLElBQUMsQ0FBQSxFQUFwQixFQUF3QixDQUF4QixFQUEyQixDQUEzQixFQUE4QixJQUFDLENBQUEsTUFBL0IsRUFBdUMsSUFBQyxDQUFBLEtBQXhDLEVBREY7T0FBQSxNQUFBO2VBR0UsSUFBQyxDQUFBLE9BQU8sQ0FBQyxTQUFULENBQW1CLElBQUMsQ0FBQSxFQUFwQixFQUF3QixDQUF4QixFQUEyQixDQUEzQixFQUE4QixJQUFDLENBQUEsS0FBL0IsRUFBc0MsSUFBQyxDQUFBLE1BQXZDLEVBSEY7O0lBREk7OzZCQU9OLFdBQUEsR0FBYSxTQUFDLENBQUQ7YUFDWCxJQUFDLENBQUEsSUFBRCxDQUFNLENBQU47SUFEVzs7NkJBSWIsSUFBQSxHQUFNLFNBQUMsQ0FBRDtNQUNKLElBQUMsQ0FBQSxNQUFELEdBQ0U7UUFBQSxDQUFBLEVBQUcsQ0FBQyxDQUFDLE9BQUYsR0FBWSxJQUFDLENBQUEsT0FBTyxDQUFDLE1BQU0sQ0FBQyxxQkFBaEIsQ0FBQSxDQUF1QyxDQUFDLElBQXZEO1FBQ0EsQ0FBQSxFQUFHLENBQUMsQ0FBQyxPQUFGLEdBQVksSUFBQyxDQUFBLE9BQU8sQ0FBQyxNQUFNLENBQUMscUJBQWhCLENBQUEsQ0FBdUMsQ0FBQyxHQUR2RDs7TUFHRixJQUFDLENBQUEsWUFBRCxHQUNFO1FBQUEsQ0FBQSxFQUFHLENBQUMsSUFBQyxDQUFBLE1BQU0sQ0FBQyxDQUFULEdBQWEsQ0FBQyxDQUFDLElBQUMsQ0FBQSxPQUFPLENBQUMsV0FBVCxHQUF1QixDQUF4QixDQUFBLEdBQTZCLElBQUMsQ0FBQSxPQUFPLENBQUMsS0FBdkMsQ0FBaEI7UUFDQSxDQUFBLEVBQUcsQ0FBQyxJQUFDLENBQUEsTUFBTSxDQUFDLENBQVQsR0FBYSxDQUFDLENBQUMsSUFBQyxDQUFBLE9BQU8sQ0FBQyxZQUFULEdBQXdCLENBQXpCLENBQUEsR0FBOEIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUF4QyxDQURoQjs7YUFFRixJQUFDLENBQUEsWUFBRCxDQUFBO0lBUkk7OzZCQVdOLFlBQUEsR0FBYyxTQUFBO0FBR1osVUFBQTtNQUFBLGFBQUEsR0FBZ0IsQ0FBQSxDQUFFLFVBQUYsQ0FBYSxDQUFDLEdBQWQsQ0FBa0IsQ0FBbEIsQ0FBb0IsQ0FBQyxVQUFyQixDQUFnQyxJQUFoQztNQUNoQixhQUFhLENBQUMsTUFBTSxDQUFDLEtBQXJCLEdBQTZCLElBQUMsQ0FBQSxPQUFPLENBQUM7TUFDdEMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxNQUFyQixHQUE4QixJQUFDLENBQUEsT0FBTyxDQUFDO01BRXZDLGFBQWEsQ0FBQyxLQUFkLENBQW9CLElBQUMsQ0FBQSxPQUFPLENBQUMsS0FBN0IsRUFBb0MsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUE3QztNQUNBLGFBQWEsQ0FBQyxTQUFkLENBQXdCLElBQUMsQ0FBQSxZQUFZLENBQUMsQ0FBdEMsRUFBeUMsSUFBQyxDQUFBLFlBQVksQ0FBQyxDQUF2RDtNQUNBLGFBQWEsQ0FBQyxTQUFkLENBQXdCLElBQUMsQ0FBQSxPQUFPLENBQUMsTUFBakMsRUFBeUMsQ0FBekMsRUFBNEMsQ0FBNUM7TUFHQSxJQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsQ0FBa0IsSUFBQSxNQUFBLENBQU8sYUFBUCxFQUFzQixJQUFDLENBQUEsT0FBdkIsRUFBZ0MsSUFBQyxDQUFBLE1BQU0sQ0FBQyxDQUF4QyxFQUEyQyxJQUFDLENBQUEsTUFBTSxDQUFDLENBQW5ELEVBQXNELElBQXRELENBQWxCO2FBQ0EsSUFBQyxDQUFBLGlCQUFELENBQUE7SUFiWTs7NkJBZWQsaUJBQUEsR0FBbUIsU0FBQTtBQUVqQixVQUFBO01BQUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxPQUFULENBQUE7QUFHQTtBQUFBO1dBQUEscUNBQUE7O1FBRUUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxTQUFULENBQ0UsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQURqQixFQUN5QixNQUFNLENBQUMsT0FBUCxDQUFBLENBRHpCLEVBQzJDLE1BQU0sQ0FBQyxPQUFQLENBQUEsQ0FEM0MsRUFFRSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUZ4QixFQUUrQixNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUZyRDtxQkFLQSxJQUFDLENBQUEsT0FBTyxDQUFDLFVBQVQsQ0FDRSxNQUFNLENBQUMsT0FBUCxDQUFBLENBREYsRUFDb0IsTUFBTSxDQUFDLE9BQVAsQ0FBQSxDQURwQixFQUVFLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBRnhCLEVBRStCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BRnJEO0FBUEY7O0lBTGlCOzs7Ozs7RUFrQmY7SUFDUyxnQkFBQyxPQUFELEVBQVUsZUFBVixFQUEyQixDQUEzQixFQUE4QixDQUE5QixFQUFpQyxNQUFqQztNQUVYLElBQUMsQ0FBQSxPQUFELEdBQVcsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxJQUFULEVBQWUsRUFBZixFQUFtQixPQUFuQjtNQUVYLElBQUMsQ0FBQSxlQUFELEdBQW1CO01BRW5CLElBQUMsQ0FBQSxDQUFELEdBQUs7TUFFTCxJQUFDLENBQUEsQ0FBRCxHQUFLO01BRUwsSUFBQyxDQUFBLE1BQUQsR0FBVTtJQVZDOztxQkFZYixPQUFBLEdBQVMsU0FBQTthQUNQLElBQUMsQ0FBQSxDQUFELEdBQUssSUFBQyxDQUFBLGVBQWUsQ0FBQyxXQUFqQixHQUErQjtJQUQ3Qjs7cUJBR1QsT0FBQSxHQUFTLFNBQUE7YUFDUCxJQUFDLENBQUEsQ0FBRCxHQUFLLElBQUMsQ0FBQSxlQUFlLENBQUMsWUFBakIsR0FBZ0M7SUFEOUI7Ozs7O0FBck9YIiwic291cmNlc0NvbnRlbnQiOlsiIyBEZWZpbmUgalF1ZXJ5IHBsdWdpblxuZG8gKCQpIC0+XG4gICQuZm4ucm90YXRpb25ab29tZXIgPSAob3B0cyA9IHt9KSAtPlxuICAgICAgIyBBbGxvdyBtdWx0aXBsZSBkZWNsYXJhdGlvbnNcbiAgICAgIHRoaXMuZWFjaCAoaW5kZXgsIGVsKSAtPlxuICAgICAgICBuZXcgcm90YXRpb25ab29tZXIoZWwsIG9wdHMpXG5cbiMgTWFpbiBjbGFzc1xuY2xhc3Mgcm90YXRpb25ab29tZXJcblxuICAjIFJlY2VpdmUgRE9NIGVsZW1lbnQgYW5kIHVzZXIgb3B0aW9uc1xuICBjb25zdHJ1Y3RvcjogKGVsLCBvcHRzKSAtPlxuICAgIEAkZWwgPSAkKGVsKVxuICAgIEBlbCA9IGVsXG4gICAgQG9wdHMgPSBvcHRzXG4gICAgQHBhcnNlT3B0aW9ucygpXG4gICAgQGluaXRpYWxpemUoKVxuXG4gIGluaXRpYWxpemU6IC0+XG4gICAgQHdpZHRoID0gQCRlbC53aWR0aCgpXG4gICAgQGhlaWdodCA9IEAkZWwuaGVpZ2h0KClcblxuICAgICMgVXNlZCBmb3IgY2hhbmdpbmcgd2lkdGggJiBoZWlnaHQgb24gY2FudmFzIGVsZW1lbnRcbiAgICBAZGltZW5zaW9ucyA9XG4gICAgICB2ZXJ0OlxuICAgICAgICB3OiBAd2lkdGhcbiAgICAgICAgaDogQGhlaWdodFxuICAgICAgaG9yOlxuICAgICAgICB3OiBAaGVpZ2h0XG4gICAgICAgIGg6IEB3aWR0aFxuXG4gICAgQHpvb21lcnMgPSBbXSAjIEtlZXBzIHRyYWNrIG9mIGF2YWlsYWJsZSB6b29tIHdpbmRvd3NcblxuICAgIEBpbml0aWFsaXplQ2FudmFzKClcblxuICBpbml0aWFsaXplQ2FudmFzOiAtPlxuICAgICMgVGhpcyByZXBsYWNlcyBvcmlnaW5hbCBlbGVtZW50XG4gICAgQCRjYW52YXMgPSAkKCc8Y2FudmFzPicpXG4gICAgIyBDb3B5IHNvbWUgQ1NTIHN0eWxlc1xuICAgIEAkY2FudmFzLmNzcyh7XG4gICAgICBwb3NpdGlvbjogQCRlbC5jc3MoJ3Bvc2l0aW9uJylcbiAgICAgIGRpc3BsYXk6IEAkZWwuY3NzKCdkaXNwbGF5JylcbiAgICAgIH0pXG4gICAgIyBQdXQgbmV3IGVsZW1lbnQgbmV4dCB0byBvcmlnaW5hbCBlbGVtZW50XG4gICAgQCRlbC5wYXJlbnRzKCkuZmlyc3QoKS5hcHBlbmQoQCRjYW52YXMpXG4gICAgQCRlbC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpXG4gICAgIyBDcmVhdGUgY2FudmFzIGNvbnRleHRcbiAgICBAY29udGV4dCA9IEAkY2FudmFzLmdldCgwKS5nZXRDb250ZXh0KCcyZCcpXG4gICAgQGJpbmRDb250cm9scygpXG4gICAgQHRyYW5zZm9ybSgpXG5cbiAgcGFyc2VPcHRpb25zOiAtPlxuICAgIEBvcHRpb25zID1cbiAgICAgIHJvdGF0aW9uOiBAb3B0cy5yb3RhdGlvbiB8fCAwXG4gICAgICByb3RhdGVCdXR0b246IEBvcHRzLnJvdGF0ZUJ1dHRvblxuICAgICAgYW50aVJvdGF0ZUJ1dHRvbjogQG9wdHMuYW50aVJvdGF0ZUJ1dHRvblxuICAgICAgem9vbWVyV2lkdGg6IEBvcHRzLlpvb21lcldpZHRoIHx8IDE1MFxuICAgICAgem9vbWVySGVpZ2h0OiBAb3B0cy5ab29tZXJIZWlnaHQgfHwgMTAwXG4gICAgICBzY2FsZTogQG9wdHMuc2NhbGUgfHwgMi41XG4gICAgICBjbG9zZU9uQ2xpY2s6IEBvcHRzLmNsb3NlT25DbGljayB8fCB0cnVlXG4gICAgICBjbG9zZU9uQ2xpY2tPdXRzaWRlOiBAb3B0cy5jbG9zZU9uQ2xpY2tPdXRzaWRlIHx8IHRydWVcbiAgICAgIG11bHRpWm9vbTogQG9wdHMubXVsdGlab29tIHx8IGZhbHNlXG4gICAgICBzaG93Wm9vbWVyQWZ0ZXJSb3RhdGlvbjogQG9wdHMuc2hvd1pvb21lckFmdGVyUm90YXRpb24gfHwgdHJ1ZVxuXG4gICAgIyBIYW5kbGUgZXhjZXB0aW9uc1xuICAgIGlmIEBvcHRpb25zLmNsb3NlT25DbGljayAmJiBAb3B0aW9ucy5tdWx0aVpvb21cbiAgICAgIEBvcHRpb25zLm11bHRpWm9vbSA9IGZhbHNlXG4gICAgICBlcnIgPSAnWW91IHNldCBvcHRpb25zIFwiY2xvc2VPbkNsaWNrXCIgYW5kIFwibXVsdGlab29tXCIgdG8gdHJ1ZS4gXFxuJ1xuICAgICAgZXJyICs9ICcgVGhpcyBpcyBpbnZhbGlkIGNvbWJpbmF0aW9uIG9mIGFyZ3VtZW50cy4gU2V0dGluZyBcIm11bHRpWm9vbVwiIHRvIGZhbHNlLidcbiAgICAgIGNvbnNvbGUud2FybihlcnIpXG5cbiAgICAjIFNldCBpbnRpYWwgcm90YXRpb25cbiAgICBAZGVnID0gQG9wdGlvbnMucm90YXRpb25cbiAgICAjIFJldHVyblxuICAgIEBvcHRpb25zXG5cbiAgIyBFdmVudCBoYW5kbGVyc1xuICBiaW5kQ29udHJvbHM6IC0+XG4gICAgaWYgQG9wdGlvbnMucm90YXRlQnV0dG9uXG4gICAgICBAJHJvdGF0ZUJ1dHRvbiA9ICQoQG9wdGlvbnMucm90YXRlQnV0dG9uKVxuXG4gICAgaWYgQG9wdGlvbnMuYW50aVJvdGF0ZUJ1dHRvblxuICAgICAgQCRhbnRpUm90YXRlQnV0dG9uID0gJChAb3B0aW9ucy5hbnRpUm90YXRlQnV0dG9uKVxuXG4gICAgaWYgQCRyb3RhdGVCdXR0b25cbiAgICAgIEAkcm90YXRlQnV0dG9uLm9uICdjbGljaycsID0+XG4gICAgICAgIEByb3RhdGVDVygpXG5cbiAgICBpZiBAJGFudGlSb3RhdGVCdXR0b25cbiAgICAgIEAkYW50aVJvdGF0ZUJ1dHRvbi5vbiAnY2xpY2snLCA9PlxuICAgICAgICBAcm90YXRlQUNXKClcblxuICAgIEAkY2FudmFzLm9uICdjbGljaycsIEBoYW5kbGVDbGlja1xuXG4gICMgU2V0IHJvdGF0aW9uLXpvb21lciBlbGVtZW50J3MgZGltZW5zaW9uc1xuICBzZXRXaWR0aEFuZEhlaWdodDogLT5cbiAgICBpZiBAaGFzSG9yaXpvbnRhbFJvdGF0aW9uKClcbiAgICAgIEB3aWR0aCA9IEBkaW1lbnNpb25zLmhvci53XG4gICAgICBAaGVpZ2h0ID0gQGRpbWVuc2lvbnMuaG9yLmhcbiAgICBlbHNlXG4gICAgICBAd2lkdGggPSBAZGltZW5zaW9ucy52ZXJ0LndcbiAgICAgIEBoZWlnaHQgPSBAZGltZW5zaW9ucy52ZXJ0LmhcblxuICAjIFRyYW5zZm9ybSByb3RhdGlvbiB6b29tZXIgZWxlbWVudCBhY2NvcmRpbmdseVxuICB0cmFuc2Zvcm06IC0+XG4gICAgQHNldFdpZHRoQW5kSGVpZ2h0KClcbiAgICBAY29udGV4dC5jYW52YXMud2lkdGggPSBAd2lkdGhcbiAgICBAY29udGV4dC5jYW52YXMuaGVpZ2h0ID0gQGhlaWdodFxuICAgIEByb3RhdGUoKVxuXG4gIHJvdGF0ZTogLT5cbiAgICAjIENvbnRleHQgaXMgc2F2ZWQgc28gaXQgY2FuIGJlIHJlaW5pdGlhbGl6ZWQgbGF0ZXIgZm9yIHpvb2VtciB3aW5kb3dzXG4gICAgQGNvbnRleHQuc2F2ZSgpXG4gICAgc3dpdGNoIEBkZWdcbiAgICAgIHdoZW4gOTBcbiAgICAgICAgQGNvbnRleHQudHJhbnNsYXRlKEB3aWR0aCwgMClcbiAgICAgICAgYnJlYWtcbiAgICAgIHdoZW4gMjcwXG4gICAgICAgIEBjb250ZXh0LnRyYW5zbGF0ZSgwLCBAaGVpZ2h0KVxuICAgICAgICBicmVha1xuICAgICAgd2hlbiAxODBcbiAgICAgICAgQGNvbnRleHQudHJhbnNsYXRlKEB3aWR0aCwgQGhlaWdodClcbiAgICAgICAgYnJlYWtcblxuICAgIEBjb250ZXh0LnJvdGF0ZSgoTWF0aC5QSSAvIDE4MCkgKiBAZGVnKVxuICAgIEByZWRyYXcoKVxuXG4gICMgQ2xvY2t3aXNlIHJvdGF0aW9uIGRldGVjdGVkXG4gIHJvdGF0ZUNXOiAtPlxuICAgIEBkZWcgPSBpZiBAZGVnICsgOTAgPj0gMzYwXG4gICAgICAgICAgICAwXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgQGRlZyArIDkwXG4gICAgQHRyYW5zZm9ybSgpXG4gICAgQGRlZ1xuXG4gICMgQW50aS1jbG9ja3dpc2Ugcm90YXRpb24gZGV0ZWN0ZWRcbiAgcm90YXRlQUNXOiAtPlxuICAgIEBkZWcgPSBpZiBAZGVnIC0gOTAgPCAwXG4gICAgICAgICAgICAyNzBcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBAZGVnIC0gOTBcbiAgICBAdHJhbnNmb3JtKClcbiAgICBAZGVnXG5cbiAgIyBJcyBpdCByb3RhdGVkIG9uIGl0cyBzaWRlP1xuICBoYXNIb3Jpem9udGFsUm90YXRpb246IC0+XG4gICAgQGRlZyA9PSA5MCB8fCBAZGVnID09IDI3MFxuXG4gICMgRGVsZXRlIGV2ZXJ5dGhpbmcgZnJvbSByb3RhdGlvbiB6b29tZXIgY2FudmFzXG4gIGNsZWFyOiAtPlxuICAgIEBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBAY29udGV4dC5jYW52YXMud2lkdGgsIEBjb250ZXh0LmNhbnZhcy5oZWlnaHQpXG5cbiAgIyBDYWxsZWQgYWZ0ZXIgcm90YXRpb1xuICByZWRyYXc6IC0+XG4gICAgQGNsZWFyKClcbiAgICBAZHJhdygpXG4gICAgQGluaXRpYWxpemVab29tZXJzKCkgdW5sZXNzIEBvcHRpb25zLnNob3dab29tZXJBZnRlclJvdGF0aW9uXG5cbiAgZHJhdzogLT5cbiAgICBpZiBAaGFzSG9yaXpvbnRhbFJvdGF0aW9uKClcbiAgICAgIEBjb250ZXh0LmRyYXdJbWFnZShAZWwsIDAsIDAsIEBoZWlnaHQsIEB3aWR0aClcbiAgICBlbHNlXG4gICAgICBAY29udGV4dC5kcmF3SW1hZ2UoQGVsLCAwLCAwLCBAd2lkdGgsIEBoZWlnaHQpXG5cbiAgIyBDbGljayBoYW5kbGVyIG9uIHJvdGF0aW9uIHpvb21lciBjYW52YXNcbiAgaGFuZGxlQ2xpY2s6IChlKSA9PlxuICAgIEB6b29tKGUpXG5cbiAgIyBQcmVwYXJlIGNvb3JkaW5hdGVzIGZvciBuZXcgem9vbWVyXG4gIHpvb206IChlKSA9PlxuICAgIEBjb29yZHMgPVxuICAgICAgeDogZS5jbGllbnRYIC0gQGNvbnRleHQuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnRcbiAgICAgIHk6IGUuY2xpZW50WSAtIEBjb250ZXh0LmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3BcblxuICAgIEBzb3VyY2VDb29yZHMgPVxuICAgICAgeDogLUBjb29yZHMueCArICgoQG9wdGlvbnMuem9vbWVyV2lkdGggLyAyKSAvIEBvcHRpb25zLnNjYWxlKVxuICAgICAgeTogLUBjb29yZHMueSArICgoQG9wdGlvbnMuem9vbWVySGVpZ2h0IC8gMikgLyBAb3B0aW9ucy5zY2FsZSlcbiAgICBAYWRkTmV3Wm9vbWVyKClcblxuICAjIE5ldyB6b29tZXJcbiAgYWRkTmV3Wm9vbWVyOiAtPlxuICAgICMgT2ZmLXNjcmVlbiBjYW52YXMgZWxlbWVudCwgdXNlZCBvbmx5IGZvciBleHRyYWN0aW5nIHRoZSByaWdodFxuICAgICMgcG9ydGlvbiBvZiBpbWFnZSBmcm9tIHJvdGF0aW9uIHpvb21lciBjYW52YXNcbiAgICB6b29tZXJDb250ZXh0ID0gJCgnPGNhbnZhcz4nKS5nZXQoMCkuZ2V0Q29udGV4dCgnMmQnKVxuICAgIHpvb21lckNvbnRleHQuY2FudmFzLndpZHRoID0gQG9wdGlvbnMuem9vbWVyV2lkdGhcbiAgICB6b29tZXJDb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBAb3B0aW9ucy56b29tZXJIZWlnaHRcbiAgICAjIFNjYWxlIGFuZCB0cmFuc2xhdGVcbiAgICB6b29tZXJDb250ZXh0LnNjYWxlKEBvcHRpb25zLnNjYWxlLCBAb3B0aW9ucy5zY2FsZSlcbiAgICB6b29tZXJDb250ZXh0LnRyYW5zbGF0ZShAc291cmNlQ29vcmRzLngsIEBzb3VyY2VDb29yZHMueSlcbiAgICB6b29tZXJDb250ZXh0LmRyYXdJbWFnZShAY29udGV4dC5jYW52YXMsIDAsIDApXG5cbiAgICAjIEFkZCBuZXcgem9vbWVyIG9iamVjdFxuICAgIEB6b29tZXJzLnB1c2gobmV3IFpvb21lcih6b29tZXJDb250ZXh0LCBAb3B0aW9ucywgQGNvb3Jkcy54LCBAY29vcmRzLnksIHRydWUpKVxuICAgIEBpbml0aWFsaXplWm9vbWVycygpXG5cbiAgaW5pdGlhbGl6ZVpvb21lcnM6IC0+XG4gICAgIyBSZXNldCByb3RhdGlvbiB6b29tZXIgY2FudmFzIChjb250ZXh0IGlzIHRyYW5zbGF0ZWQgZHVyaW5nIHJvdGF0aW9uKVxuICAgIEBjb250ZXh0LnJlc3RvcmUoKVxuXG4gICAgIyBJdGVyYXRlIG92ZXIgY3VycmVudCB6b29tZXJzXG4gICAgZm9yIHpvb21lciBpbiBAem9vbWVyc1xuICAgICAgIyBBZGQgY29udGVudFxuICAgICAgQGNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICB6b29tZXIuY29udGV4dC5jYW52YXMsIHpvb21lci5vcmlnaW5YKCksIHpvb21lci5vcmlnaW5ZKCksXG4gICAgICAgIHpvb21lci5jb250ZXh0LmNhbnZhcy53aWR0aCwgem9vbWVyLmNvbnRleHQuY2FudmFzLmhlaWdodFxuICAgICAgKVxuICAgICAgIyBBZGQgYm9yZGVyc1xuICAgICAgQGNvbnRleHQuc3Ryb2tlUmVjdChcbiAgICAgICAgem9vbWVyLm9yaWdpblgoKSwgem9vbWVyLm9yaWdpblkoKSxcbiAgICAgICAgem9vbWVyLmNvbnRleHQuY2FudmFzLndpZHRoLCB6b29tZXIuY29udGV4dC5jYW52YXMuaGVpZ2h0XG4gICAgICAgIClcblxuIyBSZXByZXNlbnRzIHpvb21lciB3aW5kb3cgb24gY2FudmFzXG5jbGFzcyBab29tZXJcbiAgY29uc3RydWN0b3I6IChjb250ZXh0LCBpbnN0YW5jZU9wdGlvbnMsIHgsIHksIGFjdGl2ZSkgLT5cbiAgICAjIENvcHkgb3ZlciBjYW52YXMgYXR0cmlidXRlc1xuICAgIEBjb250ZXh0ID0gJC5leHRlbmQodHJ1ZSwge30sIGNvbnRleHQpXG4gICAgIyBPcHRpb25zIGZyb20gcm90YXRpb24gem9vbWVyIHBsdWdpblxuICAgIEBpbnN0YW5jZU9wdGlvbnMgPSBpbnN0YW5jZU9wdGlvbnNcbiAgICAjIFRydWUgb3JpZ2luIFhcbiAgICBAeCA9IHhcbiAgICAjIFRydWUgb3JpZ2luIFlcbiAgICBAeSA9IHlcbiAgICAjIElzIHpvb21lciBvcGVuZWQ/XG4gICAgQGFjdGl2ZSA9IGFjdGl2ZVxuXG4gIG9yaWdpblg6IC0+XG4gICAgQHggLSBAaW5zdGFuY2VPcHRpb25zLnpvb21lcldpZHRoIC8gMlxuXG4gIG9yaWdpblk6IC0+XG4gICAgQHkgLSBAaW5zdGFuY2VPcHRpb25zLnpvb21lckhlaWdodCAvIDJcbiJdfQ==
//# sourceURL=/Users/ondrejsynacek/Projects/rotation-zoomer/source/rotation-zoomer.coffee