<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RotationZoomer jQuery plugin</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" type="text/javascript"></script>
  <script src="../dist/rotation-zoomer.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.2.0/milligram.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/1.6.329/pdf.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.min.js"></script>
  <style>
    body {
      max-width: 1200px;
      margin: 10px auto;
      padding: 30px;
    }

    .configuration dt {
      font-family: 'Courier';
      font-size: 0.8em;
      background: lightgrey;
      color: black
    }
  </style>
</head>
<body>
  <a href="https://github.com/comatory/rotation-zoomer"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
  <div class="row">
    <div class="column">
      <h1>RotationZoomer jQuery plugin</h1>
      <p>
        This plugin allows you to easily rotate and zoom images/canvas elements in simplistic fashion. It offers rotation in place without worrying about padding or margin. Elements can only be rotated by 90 degree angles.
      </p>
      <p>
        By default the elements will become responsive = their widths will be set to maximum width of their containing parent element. This is by design to target mobile devices first, it can be disabled via option.
      </p>
      <p>
        Once you call the function on <em>image</em> or <em>canvas</em> element, that element becomes hidden and is instead replaced by canvas element where the actual manipulation occurs.
      </p>
      <p>
        The source is written in <a href="http://coffeescript.org/">CoffeeScript</a> v. 1.11.0 and composed & minified using <a href="https://www.npmjs.com/package/coffeebar">coffeebar</a>. The images are by artist <a href="http://cargocollective.com/matthewdivito">Matthew Divito and are taken from his personal webpage</a>.
      </p>
      <h2>Compatibility</h2>
      <p>
        For now, the plugin is only tested against newest browsers (Safari 10 & Chrome 50). The version of jQuery used is 3.1.1.
      </p>
    </div>
  </div>

  <div class="row">
    <div class="column">
      <h2>Usage</h2>
      <p>The behaviour is as expected from any other jQuery plugin. This is the most simple configuration:<br/ >
        <pre>
          <code class="language-javascript">
            $('#example1').rotationZoomer();
          </code>
        </pre>
      </p>
      <div>
        <img src="https://cloud.githubusercontent.com/assets/5990424/20459207/c10ad798-aeb9-11e6-8429-9fc27f10916d.jpg" alt="" id="example1" style="display: block;">
      </div>
      <p>
        In this configuration without any arguments you get just default behaviour. This default behaviour is just zoom function, no rotation (you need to specify rotation buttons for that). The zoom window is disabled when you click outside of it.
      </p>
    </div>
  </div>

  <div class="row">
    <div class="column">
      <h2>Configuration</h2>
      <p>
        Following options can be specified:<br/>
        <dl class="configuration">
          <dt>rotation</dt>
          <dd>(Integer: [0, 90, 180, 270] - Starting rotation (in degrees). Default is 0.</dd>

          <dt>rotateButton</dt>
          <dd>(ID of HTML element) - Button that rotates canvas clock-wise</dd>

          <dt>antiRotateButton</dt>
          <dd>(ID of HTML element) - Button that rotates canvas anti clock-wise</dd>

          <dt>zoomerEnabled</dt>
          <dd>(Boolean) - Enable or disable zooming functionality. Default is true.</dd>

          <dt>zoomerWidth</dt>
          <dd>(Integer) - The width (converted to px) of the zoomer window. Default is 150.</dd>

          <dt>zoomerHeight</dt>
          <dd>(Integer) - The height (converted to px) of the zoomer window. Default is 100.</dd>

          <dt>scale</dt>
          <dd>(Float, Integer) - The amount of scale factor that is applied to zoomer. Default is 2.5.</dd>

          <dt>zoomerBorderWidth</dt>
          <dd>(Integer) - Border width of zoomer window (converted to px). Default is 1.</dd>

          <dt>zoomerBorderColor</dt>
          <dd>(String, Hexcode) - Border color of zoomer window.</dd>

          <dt>zoomerBackgroundColor</dt>
          <dd>(String, Hexcode) - The fill of zoomer window. It's used when the zoomer window is on the edge of canvas, otherwise it'd be transparent. Default is white.</dd>

          <dt>closeOnClick</dt>
          <dd>(Boolean) - When zoomer window is clicked, it is also closed. Default is false.</dd>

          <dt>closeOnClickOutside</dt>
          <dd>(Boolean) - When outside of zoomer window is clicked, it will be closed. Default is true.</dd>

          <dt>showZoomerAfterRotation</dt>
          <dd>(Boolean) - When you leave zoomer window opened and you rotate image, the zoomer window will be kept open in new recalculated position. Default is true.</dd>

          <dt>responsive</dt>
          <dd>(Boolean) - Specify whether width of image/canvas should be stretched to maximum of its parent. Default is 'true'.</dd>

          <dt>cursorZoomIn</dt>
          <dd>(String) - CSS property of cursor on areas that can be zoomed in (canvas without zoomer window opened). Default is 'zoom-in'.</dd>

          <dt>cursorZoomClose</dt>
          <dd>(String) - CSS property of cursor indicating that zoomer window will be closed. Default is 'zoom-out'.</dd>

          <dt>cursorZoomNoAction</dt>
          <dd>(String) - CSS property of cursor indicating that nothing will happen on click. Default is 'default'.</dd>
        </dl>
      </p>
    </div>
  </div>

  <div class="row">
    <div class="column">
      <br />
      <h2>Examples</h2>
      <div class="row">
        <div class="column">
          <h3>Zooming and rotating</h3>
          <pre>
            <code class="language-javascript">
              $('#example2').rotationZoomer({
                zoomerWidth: 350,
                zoomerHeight: 250,
                zoomerBorderColor: 'orange',
                scale: 5.0,
                rotation: 180,
                closeOnClick: true,
                rotateButton: '#rotateButton',
                antiRotateButton: '#antiRotateButton'
              });
            </code>
          </pre>
          <div>
            <button id="rotateButton">Rotate clock-wise</button>
            <button id="antiRotateButton">Rotate anti clock-wise</button>
          </div>
          <div>
            <img src="https://cloud.githubusercontent.com/assets/5990424/20459212/ce4039da-aeb9-11e6-923a-b3b24ec6fe34.jpg" id="example2" alt="">
          </div>

        </div>
      </div>

      <br />
      <div class="row">
        <div class="column">
          <h3>Multiple images with set widths</h3>
          <p>IMG tags have set widths, canvas keeps the same size and constraints to correct ratio.</p>
          <p>Set <b>responsive</b> option to <i>false</i> to retain fixed widths.</p>
          <pre>
            <code class="language-javascript">
              $('#set01, #set02, #set03').rotationZoomer({
                rotateButton: '#rotateButton02',
                antiRotateButton: '#antiRotateButton02',
                responsive: false,
                scale: 1.8,
                zoomerWidth: 100,
                zoomerHeight: 60,
                zoomerBorderWidth: 2,
                zoomerBorderColor: 'white',
                closeOnClick: true
              });
            </code>
          </pre>
          <div>
            <button id="rotateButton02">Rotate clock-wise</button>
            <button id="antiRotateButton02">Rotate anti clock-wise</button>
          </div>
          <p><b>250px</b></p>
          <div class="images">
            <div>
              <img src="https://cloud.githubusercontent.com/assets/5990424/20459207/c10ad798-aeb9-11e6-8429-9fc27f10916d.jpg" id="set01" alt="" width="250px">
            </div>
            <p><b>300px</b></p>
            <div>
              <img src="https://cloud.githubusercontent.com/assets/5990424/20459212/ce4039da-aeb9-11e6-923a-b3b24ec6fe34.jpg" id="set02" alt="" width="300px">
            </div>
            <p><b>450px</b></p>
            <div>
              <img src="https://cloud.githubusercontent.com/assets/5990424/20459211/ce3e62ea-aeb9-11e6-9995-2c05656dfde5.jpg" id="set03" alt="" width="450px">
            </div>
          </div>
          </div>
        </div>
      </div>
    </div>

    <br />
    <div class="row">
      <div class="column">
        <h3>PDFs & pages</h3>
        <p>You can also use other canvases as target element. Here it's demonstrated with multiple-paged PDF document rendered via <a href="https://mozilla.github.io/pdf.js/">PDFjs library</a> which outputs the pages as canvas elements.</p>
        <pre>
          <code class="language-javascript">
            var canvasContainer = document.getElementById('pdf');
            var scale = 1.5;

            function renderPage(page) {
                var viewport = page.getViewport(scale);
                var canvas = document.createElement('canvas');
                var context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;

                var renderContext = {
                  canvasContext: context,
                  viewport: viewport
                };
                canvasContainer.appendChild(canvas)
                page.render(renderContext).then(function() {
                  $(context.canvas).rotationZoomer({
                    closeOnClick: true,
                    rotateButton: '#pdfRotate'
                  });
                });
            }

            PDFJS.getDocument('compressed.tracemonkey-pldi-09.pdf').then(function(pdf) {
              for (var num = 1; num <= 3; num++) {
                pdf.getPage(num).then(renderPage);
              }
            });
          </code>
        </pre>
        <div>
          <button id="pdfRotate">Rotate clock-wise</button>
        </div>
        <div id="pdf"></div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="column">
      <h2>Todo</h2>
      <p>
        <ul>
          <li>
            Add responsive resizing
          </li>
          <li>
            Fill up zoomer window when on edge
          </li>
          <li>
            Add icons for hovering and customizations
          </li>
        </ul>
      </p>
    </div>
  </div>

  <script>
    // You want to make sure all images are loaded before calling
    // rotationZoomer function on them
    window.onload = function() {

      $('#example1').rotationZoomer();

      $('#example2').rotationZoomer({
        zoomerWidth: 250,
        zoomerHeight: 150,
        zoomerBorderColor: 'orange',
        scale: 5.0,
        rotation: 180,
        closeOnClick: true,
        rotateButton: '#rotateButton',
        antiRotateButton: '#antiRotateButton'
      });

      $('#set01, #set02, #set03').rotationZoomer({
        rotateButton: '#rotateButton02',
        antiRotateButton: '#antiRotateButton02',
        scale: 1.8,
        responsive: false,
        zoomerWidth: 100,
        zoomerHeight: 60,
        zoomerBorderWidth: 2,
        zoomerBorderColor: 'white',
        closeOnClick: true
      });

      // This code only works if you have PDFjs included
      var canvasContainer = document.getElementById('pdf');
      var scale = 1.5;

      function renderPage(page) {
          var viewport = page.getViewport(scale);
          var canvas = document.createElement('canvas');
          var context = canvas.getContext('2d');
          canvas.height = viewport.height;
          canvas.width = viewport.width;

          var renderContext = {
            canvasContext: context,
            viewport: viewport
          };
          canvasContainer.appendChild(canvas)
          // Must implement promise here and call the function
          // after the page render occurs
          page.render(renderContext).then(function() {
            $(context.canvas).rotationZoomer({
              closeOnClick: true,
              rotateButton: '#pdfRotate'
            });
          });
      }

      PDFJS.getDocument('compressed.tracemonkey-pldi-09.pdf').then(function(pdf) {
        for (var num = 1; num <= 3; num++) {
          pdf.getPage(num).then(renderPage);
        }
      });
    }

  </script>
</body>
</html>
